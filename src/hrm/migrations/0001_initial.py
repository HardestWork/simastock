# Generated by Django 5.2.11 on 2026-02-27 10:33

import django.core.validators
import django.db.models.deletion
import django.utils.timezone
import uuid
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('stores', '0017_billingmodule_billingplan_billingmoduledependency_and_more'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='AttendancePolicy',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(max_length=100, verbose_name='nom')),
                ('work_start', models.TimeField(verbose_name='heure de debut')),
                ('work_end', models.TimeField(verbose_name='heure de fin')),
                ('break_minutes', models.PositiveIntegerField(default=60, verbose_name='pause (minutes)')),
                ('late_tolerance_minutes', models.PositiveIntegerField(default=15, verbose_name='tolerance retard (min)')),
                ('is_default', models.BooleanField(default=False, verbose_name='par defaut')),
                ('enterprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='hrm_attendance_policies', to='stores.enterprise', verbose_name='entreprise')),
            ],
            options={
                'verbose_name': 'politique de presence',
                'unique_together': {('enterprise', 'name')},
            },
        ),
        migrations.CreateModel(
            name='Department',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(max_length=150, verbose_name='nom')),
                ('code', models.CharField(blank=True, default='', max_length=30, verbose_name='code')),
                ('is_active', models.BooleanField(default=True, verbose_name='actif')),
                ('enterprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='hrm_departments', to='stores.enterprise', verbose_name='entreprise')),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='children', to='hrm.department', verbose_name='departement parent')),
            ],
            options={
                'verbose_name': 'departement',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Employee',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('employee_number', models.CharField(db_index=True, max_length=30, verbose_name='matricule')),
                ('first_name', models.CharField(max_length=150, verbose_name='prenom')),
                ('last_name', models.CharField(max_length=150, verbose_name='nom')),
                ('gender', models.CharField(blank=True, choices=[('M', 'Masculin'), ('F', 'Feminin')], default='', max_length=1, verbose_name='genre')),
                ('date_of_birth', models.DateField(blank=True, null=True, verbose_name='date de naissance')),
                ('national_id', models.CharField(blank=True, default='', max_length=50, verbose_name='numero CNI / passeport')),
                ('phone', models.CharField(blank=True, default='', max_length=30, verbose_name='telephone')),
                ('email', models.EmailField(blank=True, default='', max_length=254, verbose_name='e-mail')),
                ('address', models.TextField(blank=True, default='', verbose_name='adresse')),
                ('photo', models.ImageField(blank=True, upload_to='hrm/employees/', verbose_name='photo')),
                ('hire_date', models.DateField(blank=True, null=True, verbose_name="date d'embauche")),
                ('termination_date', models.DateField(blank=True, null=True, verbose_name='date de fin')),
                ('status', models.CharField(choices=[('ACTIVE', 'Actif'), ('ON_LEAVE', 'En conge'), ('SUSPENDED', 'Suspendu'), ('TERMINATED', 'Licencie'), ('RESIGNED', 'Demissionnaire')], db_index=True, default='ACTIVE', max_length=20, verbose_name='statut')),
                ('base_salary', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=14, verbose_name='salaire de base')),
                ('bank_name', models.CharField(blank=True, default='', max_length=100, verbose_name='banque')),
                ('bank_account', models.CharField(blank=True, default='', max_length=50, verbose_name='numero de compte')),
                ('emergency_contact_name', models.CharField(blank=True, default='', max_length=150, verbose_name="contact d'urgence — nom")),
                ('emergency_contact_phone', models.CharField(blank=True, default='', max_length=30, verbose_name="contact d'urgence — telephone")),
                ('department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='employees', to='hrm.department', verbose_name='departement')),
                ('enterprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='hrm_employees', to='stores.enterprise', verbose_name='entreprise')),
                ('manager', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='direct_reports', to='hrm.employee', verbose_name='superieur hierarchique')),
                ('store', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='hrm_employees', to='stores.store', verbose_name="boutique d'affectation")),
                ('user', models.OneToOneField(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='hrm_employee', to=settings.AUTH_USER_MODEL, verbose_name='compte utilisateur')),
            ],
            options={
                'verbose_name': 'employe',
                'ordering': ['last_name', 'first_name'],
            },
        ),
        migrations.CreateModel(
            name='DisciplinaryAction',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('severity', models.CharField(choices=[('VERBAL_WARNING', 'Avertissement verbal'), ('WRITTEN_WARNING', 'Avertissement ecrit'), ('SUSPENSION', 'Mise a pied'), ('TERMINATION', 'Licenciement')], max_length=30, verbose_name='gravite')),
                ('incident_date', models.DateField(verbose_name="date de l'incident")),
                ('description', models.TextField(verbose_name="description de l'incident")),
                ('action_taken', models.TextField(blank=True, default='', verbose_name='mesure prise')),
                ('status', models.CharField(choices=[('OPEN', 'Ouvert'), ('ACKNOWLEDGED', 'Pris en compte'), ('RESOLVED', 'Resolu'), ('APPEALED', 'En appel')], db_index=True, default='OPEN', max_length=20, verbose_name='statut')),
                ('document', models.FileField(blank=True, upload_to='hrm/discipline/', verbose_name='document')),
                ('resolved_at', models.DateTimeField(blank=True, null=True, verbose_name='resolu le')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='disciplinary_actions', to='hrm.employee', verbose_name='employe')),
                ('issued_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='disciplinary_actions_issued', to='hrm.employee', verbose_name='emis par')),
            ],
            options={
                'verbose_name': 'action disciplinaire',
                'ordering': ['-incident_date'],
            },
        ),
        migrations.AddField(
            model_name='department',
            name='head',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='headed_departments', to='hrm.employee', verbose_name='responsable'),
        ),
        migrations.CreateModel(
            name='EmployeeDocument',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('doc_type', models.CharField(choices=[('CV', 'CV'), ('ID_CARD', "Piece d'identite"), ('DIPLOMA', 'Diplome'), ('CERTIFICATE', 'Certificat'), ('MEDICAL', 'Certificat medical'), ('CONTRACT', 'Contrat'), ('OTHER', 'Autre')], default='OTHER', max_length=20, verbose_name='type')),
                ('title', models.CharField(max_length=200, verbose_name='titre')),
                ('file', models.FileField(upload_to='hrm/documents/', verbose_name='fichier')),
                ('expiry_date', models.DateField(blank=True, null=True, verbose_name="date d'expiration")),
                ('notes', models.TextField(blank=True, default='', verbose_name='notes')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='documents', to='hrm.employee', verbose_name='employe')),
                ('uploaded_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='telecharge par')),
            ],
            options={
                'verbose_name': 'document employe',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='EvaluationTemplate',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(max_length=150, verbose_name='nom')),
                ('description', models.TextField(blank=True, default='', verbose_name='description')),
                ('is_active', models.BooleanField(default=True, verbose_name='actif')),
                ('enterprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='hrm_evaluation_templates', to='stores.enterprise', verbose_name='entreprise')),
            ],
            options={
                'verbose_name': "modele d'evaluation",
                'ordering': ['name'],
                'unique_together': {('enterprise', 'name')},
            },
        ),
        migrations.CreateModel(
            name='EvaluationCriteria',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('label', models.CharField(max_length=200, verbose_name='libelle')),
                ('weight', models.DecimalField(decimal_places=2, default=Decimal('1.00'), max_digits=5, verbose_name='poids (%)')),
                ('sort_order', models.PositiveIntegerField(default=0, verbose_name='ordre')),
                ('template', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='criteria', to='hrm.evaluationtemplate', verbose_name='modele')),
            ],
            options={
                'verbose_name': "critere d'evaluation",
                'verbose_name_plural': "criteres d'evaluation",
                'ordering': ['sort_order'],
            },
        ),
        migrations.CreateModel(
            name='LeaveType',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(max_length=100, verbose_name='nom')),
                ('code', models.CharField(blank=True, default='', max_length=20, verbose_name='code')),
                ('default_days', models.PositiveIntegerField(default=0, verbose_name='jours par defaut / an')),
                ('is_paid', models.BooleanField(default=True, verbose_name='conge paye')),
                ('requires_document', models.BooleanField(default=False, verbose_name='justificatif requis')),
                ('is_active', models.BooleanField(default=True, verbose_name='actif')),
                ('enterprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='hrm_leave_types', to='stores.enterprise', verbose_name='entreprise')),
            ],
            options={
                'verbose_name': 'type de conge',
                'ordering': ['name'],
                'unique_together': {('enterprise', 'name')},
            },
        ),
        migrations.CreateModel(
            name='LeaveRequest',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('start_date', models.DateField(verbose_name='date de debut')),
                ('end_date', models.DateField(verbose_name='date de fin')),
                ('days_requested', models.DecimalField(decimal_places=1, max_digits=6, verbose_name='jours demandes')),
                ('reason', models.TextField(blank=True, default='', verbose_name='motif')),
                ('status', models.CharField(choices=[('PENDING', 'En attente'), ('APPROVED', 'Approuvee'), ('REJECTED', 'Refusee'), ('CANCELLED', 'Annulee')], db_index=True, default='PENDING', max_length=20, verbose_name='statut')),
                ('reviewed_at', models.DateTimeField(blank=True, null=True, verbose_name='date de revue')),
                ('review_comment', models.TextField(blank=True, default='', verbose_name='commentaire de revue')),
                ('document', models.FileField(blank=True, upload_to='hrm/leaves/', verbose_name='justificatif')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='leave_requests', to='hrm.employee', verbose_name='employe')),
                ('reviewed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='leave_reviews', to='hrm.employee', verbose_name='revue par')),
                ('leave_type', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='requests', to='hrm.leavetype', verbose_name='type de conge')),
            ],
            options={
                'verbose_name': 'demande de conge',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PayrollPeriod',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('label', models.CharField(max_length=50, verbose_name='libelle')),
                ('start_date', models.DateField(verbose_name='date de debut')),
                ('end_date', models.DateField(verbose_name='date de fin')),
                ('status', models.CharField(choices=[('OPEN', 'Ouverte'), ('PROCESSING', 'En cours'), ('CLOSED', 'Cloturee')], db_index=True, default='OPEN', max_length=20, verbose_name='statut')),
                ('closed_at', models.DateTimeField(blank=True, null=True, verbose_name='cloturee le')),
                ('closed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='cloturee par')),
                ('enterprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='hrm_payroll_periods', to='stores.enterprise', verbose_name='entreprise')),
            ],
            options={
                'verbose_name': 'periode de paie',
                'ordering': ['-start_date'],
                'unique_together': {('enterprise', 'start_date', 'end_date')},
            },
        ),
        migrations.CreateModel(
            name='PaySlip',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('base_salary', models.DecimalField(decimal_places=2, max_digits=14, verbose_name='salaire de base')),
                ('gross_salary', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=14, verbose_name='salaire brut')),
                ('total_deductions', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=14, verbose_name='total retenues')),
                ('net_salary', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=14, verbose_name='salaire net')),
                ('status', models.CharField(choices=[('DRAFT', 'Brouillon'), ('VALIDATED', 'Valide'), ('PAID', 'Paye')], db_index=True, default='DRAFT', max_length=20, verbose_name='statut')),
                ('paid_at', models.DateTimeField(blank=True, null=True, verbose_name='paye le')),
                ('notes', models.TextField(blank=True, default='', verbose_name='notes')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='payslips', to='hrm.employee', verbose_name='employe')),
                ('period', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payslips', to='hrm.payrollperiod', verbose_name='periode')),
            ],
            options={
                'verbose_name': 'bulletin de paie',
                'ordering': ['-period__start_date'],
                'unique_together': {('period', 'employee')},
            },
        ),
        migrations.CreateModel(
            name='PaySlipLine',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('line_type', models.CharField(choices=[('EARNING', 'Gain'), ('DEDUCTION', 'Retenue')], max_length=20, verbose_name='type')),
                ('label', models.CharField(max_length=150, verbose_name='libelle')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=14, verbose_name='montant')),
                ('sort_order', models.PositiveIntegerField(default=0, verbose_name='ordre')),
                ('payslip', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lines', to='hrm.payslip', verbose_name='bulletin')),
            ],
            options={
                'verbose_name': 'ligne de bulletin',
                'ordering': ['sort_order', 'line_type'],
            },
        ),
        migrations.CreateModel(
            name='PerformanceReview',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('period_label', models.CharField(blank=True, default='', max_length=50, verbose_name='periode')),
                ('review_date', models.DateField(default=django.utils.timezone.now, verbose_name="date d'evaluation")),
                ('overall_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='note globale')),
                ('status', models.CharField(choices=[('DRAFT', 'Brouillon'), ('SUBMITTED', 'Soumise'), ('COMPLETED', 'Terminee')], db_index=True, default='DRAFT', max_length=20, verbose_name='statut')),
                ('comments', models.TextField(blank=True, default='', verbose_name='commentaires')),
                ('employee_comments', models.TextField(blank=True, default='', verbose_name="commentaires de l'employe")),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='performance_reviews', to='hrm.employee', verbose_name='employe')),
                ('reviewer', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reviews_given', to='hrm.employee', verbose_name='evaluateur')),
                ('template', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='hrm.evaluationtemplate', verbose_name='modele')),
            ],
            options={
                'verbose_name': 'evaluation de performance',
                'ordering': ['-review_date'],
            },
        ),
        migrations.CreateModel(
            name='Position',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('title', models.CharField(max_length=200, verbose_name='intitule')),
                ('code', models.CharField(blank=True, default='', max_length=30, verbose_name='code')),
                ('min_salary', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=14, verbose_name='salaire minimum')),
                ('max_salary', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=14, verbose_name='salaire maximum')),
                ('is_active', models.BooleanField(default=True, verbose_name='actif')),
                ('department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='positions', to='hrm.department', verbose_name='departement')),
                ('enterprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='hrm_positions', to='stores.enterprise', verbose_name='entreprise')),
            ],
            options={
                'verbose_name': 'poste',
                'ordering': ['title'],
                'unique_together': {('enterprise', 'title')},
            },
        ),
        migrations.AddField(
            model_name='employee',
            name='position',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='employees', to='hrm.position', verbose_name='poste'),
        ),
        migrations.CreateModel(
            name='Contract',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('contract_type', models.CharField(choices=[('CDI', 'CDI'), ('CDD', 'CDD'), ('STAGE', 'Stage'), ('INTERIM', 'Interim'), ('FREELANCE', 'Freelance')], max_length=20, verbose_name='type de contrat')),
                ('reference', models.CharField(blank=True, default='', max_length=50, verbose_name='reference')),
                ('start_date', models.DateField(verbose_name='date de debut')),
                ('end_date', models.DateField(blank=True, null=True, verbose_name='date de fin')),
                ('salary', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=14, verbose_name='salaire mensuel')),
                ('status', models.CharField(choices=[('DRAFT', 'Brouillon'), ('ACTIVE', 'Actif'), ('EXPIRED', 'Expire'), ('TERMINATED', 'Resilie')], db_index=True, default='DRAFT', max_length=20, verbose_name='statut')),
                ('notes', models.TextField(blank=True, default='', verbose_name='notes')),
                ('document', models.FileField(blank=True, upload_to='hrm/contracts/', verbose_name='document')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='contracts', to='hrm.employee', verbose_name='employe')),
                ('position', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='hrm.position', verbose_name='poste')),
            ],
            options={
                'verbose_name': 'contrat',
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='SalaryComponent',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(max_length=150, verbose_name='nom')),
                ('code', models.CharField(blank=True, default='', max_length=30, verbose_name='code')),
                ('component_type', models.CharField(choices=[('EARNING', 'Gain'), ('DEDUCTION', 'Retenue')], max_length=20, verbose_name='type')),
                ('is_taxable', models.BooleanField(default=True, verbose_name='imposable')),
                ('is_fixed', models.BooleanField(default=True, verbose_name='montant fixe')),
                ('default_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=14, verbose_name='montant par defaut')),
                ('default_percentage', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=6, verbose_name='pourcentage par defaut')),
                ('is_active', models.BooleanField(default=True, verbose_name='actif')),
                ('enterprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='hrm_salary_components', to='stores.enterprise', verbose_name='entreprise')),
            ],
            options={
                'verbose_name': 'composant de salaire',
                'ordering': ['name'],
                'unique_together': {('enterprise', 'name')},
            },
        ),
        migrations.AlterUniqueTogether(
            name='department',
            unique_together={('enterprise', 'name')},
        ),
        migrations.CreateModel(
            name='Attendance',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('date', models.DateField(db_index=True, verbose_name='date')),
                ('check_in', models.DateTimeField(blank=True, null=True, verbose_name="heure d'arrivee")),
                ('check_out', models.DateTimeField(blank=True, null=True, verbose_name='heure de depart')),
                ('status', models.CharField(choices=[('PRESENT', 'Present'), ('ABSENT', 'Absent'), ('LATE', 'En retard'), ('HALF_DAY', 'Demi-journee'), ('ON_LEAVE', 'En conge'), ('HOLIDAY', 'Jour ferie')], default='PRESENT', max_length=20, verbose_name='statut')),
                ('late_minutes', models.PositiveIntegerField(default=0, verbose_name='minutes de retard')),
                ('overtime_minutes', models.PositiveIntegerField(default=0, verbose_name='heures supplementaires (min)')),
                ('notes', models.TextField(blank=True, default='', verbose_name='notes')),
                ('policy', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='hrm.attendancepolicy', verbose_name='politique appliquee')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attendances', to='hrm.employee', verbose_name='employe')),
            ],
            options={
                'verbose_name': 'pointage',
                'ordering': ['-date'],
                'indexes': [models.Index(fields=['employee', 'date'], name='hrm_attenda_employe_af257c_idx')],
                'unique_together': {('employee', 'date')},
            },
        ),
        migrations.CreateModel(
            name='Holiday',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(max_length=150, verbose_name='nom')),
                ('date', models.DateField(db_index=True, verbose_name='date')),
                ('is_recurring', models.BooleanField(default=False, verbose_name='recurrent chaque annee')),
                ('enterprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='hrm_holidays', to='stores.enterprise', verbose_name='entreprise')),
            ],
            options={
                'verbose_name': 'jour ferie',
                'ordering': ['date'],
                'unique_together': {('enterprise', 'date')},
            },
        ),
        migrations.CreateModel(
            name='LeaveBalance',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('year', models.PositiveIntegerField(verbose_name='annee')),
                ('allocated', models.DecimalField(decimal_places=1, default=Decimal('0.0'), max_digits=6, verbose_name='jours alloues')),
                ('used', models.DecimalField(decimal_places=1, default=Decimal('0.0'), max_digits=6, verbose_name='jours utilises')),
                ('carried_over', models.DecimalField(decimal_places=1, default=Decimal('0.0'), max_digits=6, verbose_name='jours reportes')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='leave_balances', to='hrm.employee', verbose_name='employe')),
                ('leave_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='balances', to='hrm.leavetype', verbose_name='type de conge')),
            ],
            options={
                'verbose_name': 'solde de conges',
                'unique_together': {('employee', 'leave_type', 'year')},
            },
        ),
        migrations.CreateModel(
            name='PerformanceReviewScore',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('score', models.DecimalField(decimal_places=2, max_digits=5, validators=[django.core.validators.MinValueValidator(Decimal('0'))], verbose_name='note')),
                ('comment', models.TextField(blank=True, default='', verbose_name='commentaire')),
                ('criteria', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='hrm.evaluationcriteria', verbose_name='critere')),
                ('review', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='scores', to='hrm.performancereview', verbose_name='evaluation')),
            ],
            options={
                'verbose_name': 'note de critere',
                'unique_together': {('review', 'criteria')},
            },
        ),
        migrations.AlterUniqueTogether(
            name='employee',
            unique_together={('enterprise', 'employee_number')},
        ),
        migrations.CreateModel(
            name='EmployeeSalaryComponent',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=14, verbose_name='montant')),
                ('percentage', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=6, verbose_name='pourcentage')),
                ('is_active', models.BooleanField(default=True, verbose_name='actif')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='salary_components', to='hrm.employee', verbose_name='employe')),
                ('component', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='employee_assignments', to='hrm.salarycomponent', verbose_name='composant')),
            ],
            options={
                'verbose_name': 'composant employe',
                'unique_together': {('employee', 'component')},
            },
        ),
    ]
